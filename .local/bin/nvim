#!/usr/bin/env sh
set -eu

# Prefer an explicit NVIM_BIN override if set
if [ -n "${NVIM_BIN:-}" ] && [ -x "${NVIM_BIN}" ]; then
  exec "${NVIM_BIN}" "$@"
fi

# Prefer user-installed unpacked nvim
if [ -x "$HOME/.local/nvim-linux64/bin/nvim" ]; then
  exec "$HOME/.local/nvim-linux64/bin/nvim" "$@"
fi

# Fall back to common system locations
if [ -x /usr/local/bin/nvim ]; then
  exec /usr/local/bin/nvim "$@"
fi

# Finally, whatever is on PATH
exec command -v nvim >/dev/null 2>&1 && exec nvim "$@"

echo "nvim not found. Install it or set NVIM_BIN." >&2
exit 127

